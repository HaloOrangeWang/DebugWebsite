
问题描述

一个python脚本程序，先在Win7 Python3环境下运行是正常的，然后转移到阿里云服务器（Ubuntu 16.04）下运行，出现错误如下：

SyntaxError: (unicode error) 'utf-8' codec can't decode byte 0xa3 in position 15: invalid start


问题原因

其实错误描述已经告诉我们错误所在，就是文本编码问题。

更进一步描述，其实就是python程序中使用了UTF-8编码，而没有在脚本上申明要使用UTF-8编码。说的更加直接一点，就是用了中文字符，一般我们习惯使用中文作为注释。

检查了一下程序，程序部分如下所示，果然是注释上使用了中文

IPRegular = r"(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5]).){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])"

#以下根据自己设置
#blog地址


解决方法


方法一：删除UTF-8编码，使用ASCII编码

最搓的方法就是将脚本程序中所有UTF-8编码内容删除，也就是删除所有中文。

我想这个方法对于大部分人来说，都是不可接受的。


方法二：注明脚本的编码方式

在python脚本程序中，主动申明我们使用UTF-8编码方式。

申明的方法如下，在程序最上面增加以下语句，尤其是第二句。

#!/usr/bin/python
# -*- coding: UTF-8 -*-

个人推荐使用方法二。

