之前的项目都是用西门子Smart和1200系列PLC。这次项目较复杂，需要用3台1500，且两台PLC的数据要汇总给主PLC。因为第一次用所以也闹出不少笑话，所以我在这里总结经验教训。

我用智能IO走PN通讯。西门子设置IO区域很方便，只要设置两个从站的PLC的传输地址就好了，主PLC那里不用设置。（图1）从站PLC_B 智能IO设置,（图2）从站PLC_C智能IO设置,（图3）主PLC_A智能IO设置。B和C两PLC需要将数据传给A。

项目很赶，在公司初步测试了伺服运动，气缸动作等等就发货了，设备之间的成产过度，数据交互等都没来得及测试。结果到现场出现了一个莫名其妙的报错，C区从站的本地模块中就PLC报错，提示智能IO报错，其他正常，现场因为不让带u盘，电脑都是客户提供，所已没有截图。

因为PLC报错设备能照样运行，不影响动作，客户又催的紧，所以有空的时候就联系西门子客服和供应商的技术，他们回复就是线排查硬件，远程IO模块是否都插牢，网线是否过短，现场接地是否处理好，网线是否带屏蔽。因为是第一次用，项目领导也很关注，所以用的网线、网线插头、交换机等都是从西门子供应商购买，就是怕通讯出错，结果还是不可避免。。。他们也让我检查软件里的固件版本是否一致，IO设置范围和区域是否合理等等。

查来查去好像就是解决不了，客户的工程师也不知道怎么解决，所以每次开机就看到PLC上的红灯在闪，看着着实碍眼，但又拿他没办法。终于在A区的设备因为更改了机构，程序也需要调整，我下载完程序后，C区的PLC报错消失了，我才明白设备到现场后修改了C区IO区增加了一段传输区防止不够用。虽然修改了C区的只能IO区虽然A区的PLC不用设置，但是还是需要C 和A区的PLC硬件完全编译和下载。如果只下载C区就会出现C区的智能IO报错。

这个问题困扰了3天，电话也打了很多遍，结果是一个很小的细节没注意。所以调试的经验还是非常重要，即使教程资料看了很多，还是需要注重实践。当然现场的环境也是导致现象无法清晰的传达给西门子技术支持。任何电子产品都不能带就不能拍照和录像。

最后还有一个利用A 区的1515PLC第二个独立网口导出GSD文件给客户，无需再同一个博图项目中就能让客户的PLC与我的PLC建立PN通讯，先设置好客户定义的IP地址和PN设备名称，然后设置如（图4），项目编译后（图5）的导出按钮才能点击。在和客户数据交互的时候还出了一件囧事，不过最后发现是客户的问题。设备的产量每次上电都会清零，我们检查了设置换了地址都没用，最后发现每次上电后客户的PLC会给我发数据清零信号，实际上这个信号只能在触摸屏上触发且需要权限。

期间还有两个V90伺服总是偶尔报错，提示编码器数据错误，检查了下网线，是网线过短插头连接松动导致的。

总结：西门子确实很适合做多站点的项目，无论软件设置使用，还是硬件稳定可靠，都非常好，虽然中间磕磕碰碰，但这就是学习经验的过程，一步一步实践中学习来的。

图 1

图 2

图 3

图 4

图 5

